Version 4
SHEET 1 1728 1104
WIRE -144 -832 -208 -832
WIRE -32 -832 -32 -864
WIRE -32 -832 -80 -832
WIRE 272 -832 208 -832
WIRE 384 -832 384 -864
WIRE 384 -832 336 -832
WIRE 384 -800 384 -832
WIRE 416 -800 384 -800
WIRE -32 -752 -32 -832
WIRE -32 -752 -208 -752
WIRE 688 -752 160 -752
WIRE -464 -688 -544 -688
WIRE -208 -688 -208 -752
WIRE -208 -688 -304 -688
WIRE -32 -688 -32 -752
WIRE 160 -688 160 -752
WIRE 160 -688 -32 -688
WIRE 208 -688 160 -688
WIRE 384 -688 384 -800
WIRE 496 -688 384 -688
WIRE -304 -672 -304 -688
WIRE -304 -672 -336 -672
WIRE -48 -672 -80 -672
WIRE 368 -672 336 -672
WIRE 688 -672 688 -752
WIRE 688 -672 624 -672
WIRE -1296 -656 -1328 -656
WIRE -1072 -656 -1104 -656
WIRE -848 -656 -880 -656
WIRE -304 -624 -336 -624
WIRE -32 -624 -32 -688
WIRE -32 -624 -80 -624
WIRE 384 -624 384 -688
WIRE 384 -624 336 -624
WIRE 688 -624 624 -624
WIRE -464 -592 -544 -592
WIRE -304 -592 -304 -624
WIRE -208 -592 -304 -592
WIRE -48 -592 -48 -672
WIRE 160 -592 -48 -592
WIRE 208 -592 160 -592
WIRE 368 -592 368 -672
WIRE 496 -592 368 -592
WIRE -208 -544 -208 -592
WIRE -48 -544 -48 -592
WIRE -48 -544 -208 -544
WIRE -32 -544 -48 -544
WIRE 160 -544 160 -592
WIRE 688 -544 688 -624
WIRE 688 -544 160 -544
WIRE 368 -512 368 -592
WIRE 400 -512 368 -512
WIRE 272 -480 208 -480
WIRE 368 -480 368 -512
WIRE 368 -480 336 -480
WIRE 384 -480 368 -480
WIRE -144 -464 -208 -464
WIRE -32 -464 -32 -544
WIRE -32 -464 -80 -464
WIRE 384 -448 384 -480
WIRE -32 -432 -32 -464
FLAG -1296 -736 vi1+
IOPIN -1296 -736 In
FLAG 416 -800 vo+
IOPIN 416 -800 Out
FLAG -1328 -656 0
FLAG -1296 -576 vi1-
IOPIN -1296 -576 In
FLAG -544 -688 vi1+
IOPIN -544 -688 In
FLAG -544 -592 vi1-
IOPIN -544 -592 In
FLAG -1072 -736 vi3+
IOPIN -1072 -736 In
FLAG -1104 -656 0
FLAG -1072 -576 vi3-
IOPIN -1072 -576 In
FLAG -848 -736 vi4+
IOPIN -848 -736 In
FLAG -880 -656 0
FLAG -848 -576 vi4-
IOPIN -848 -576 In
FLAG -32 -368 0
FLAG -208 -464 vi3-
IOPIN -208 -464 In
FLAG -32 -928 0
FLAG -208 -832 vi3+
IOPIN -208 -832 In
FLAG 384 -928 0
FLAG 208 -832 vi4+
IOPIN 208 -832 In
FLAG 384 -384 0
FLAG 208 -480 vi4-
IOPIN 208 -480 In
FLAG 400 -512 vo-
IOPIN 400 -512 Out
SYMBOL cap -48 -432 R0
WINDOW 0 -46 49 Left 2
WINDOW 3 -141 78 Left 2
SYMATTR InstName C1
SYMATTR Value {2*(1-a)*c1}
SYMBOL cap -80 -480 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 38 32 VTop 2
SYMATTR InstName C3
SYMATTR Value {2*a*c1}
SYMBOL voltage -1296 -752 R0
WINDOW 123 40 55 Left 2
WINDOW 39 0 0 Left 0
WINDOW 0 41 25 Left 2
SYMATTR Value2 AC {vi1/2}
SYMATTR InstName V4
SYMATTR Value ""
SYMBOL voltage -1296 -672 R0
WINDOW 123 40 55 Left 2
WINDOW 39 0 0 Left 0
WINDOW 0 41 25 Left 2
SYMATTR Value2 AC {vi1/2}
SYMATTR InstName V5
SYMATTR Value ""
SYMBOL OTA_diff -128 -640 R0
WINDOW 0 -12 -9 VTop 2
WINDOW 39 1 64 Top 2
SYMATTR InstName X7
SYMATTR SpiceLine gm = {gm2}
SYMBOL voltage -1072 -752 R0
WINDOW 123 40 55 Left 2
WINDOW 39 0 0 Left 0
WINDOW 0 41 25 Left 2
SYMATTR Value2 AC {vi3/2}
SYMATTR InstName V6
SYMATTR Value ""
SYMBOL voltage -1072 -672 R0
WINDOW 123 40 55 Left 2
WINDOW 39 0 0 Left 0
WINDOW 0 41 25 Left 2
SYMATTR Value2 AC {vi3/2}
SYMATTR InstName V7
SYMATTR Value ""
SYMBOL voltage -848 -752 R0
WINDOW 123 40 55 Left 2
WINDOW 39 0 0 Left 0
WINDOW 0 41 25 Left 2
SYMATTR Value2 AC {vi4/2}
SYMATTR InstName V8
SYMATTR Value ""
SYMBOL voltage -848 -672 R0
WINDOW 123 40 55 Left 2
WINDOW 39 0 0 Left 0
WINDOW 0 41 25 Left 2
SYMATTR Value2 AC {vi4/2}
SYMATTR InstName V9
SYMATTR Value ""
SYMBOL OTA_diff -384 -640 R0
WINDOW 0 -12 -9 VTop 2
WINDOW 39 -20 69 Top 2
SYMATTR InstName X8
SYMATTR SpiceLine gm = {gm1}
SYMBOL cap -48 -864 M180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C6
SYMATTR Value {2*(1-a)*c1}
SYMBOL cap -80 -816 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C7
SYMATTR Value {2*a*c1}
SYMBOL OTA_diff 288 -640 R0
WINDOW 0 -12 -9 VTop 2
WINDOW 39 -26 63 Top 2
SYMATTR InstName X9
SYMATTR SpiceLine gm = {gm3}
SYMBOL cap 368 -864 M180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C5
SYMATTR Value {2*(1-b)*c2}
SYMBOL cap 336 -816 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C8
SYMATTR Value {2*b*c2}
SYMBOL cap 368 -448 R0
WINDOW 0 -46 49 Left 2
WINDOW 3 -141 78 Left 2
SYMATTR InstName C9
SYMATTR Value {2*(1-b)*c2}
SYMBOL cap 336 -496 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 38 32 VTop 2
SYMATTR InstName C10
SYMATTR Value {2*b*c2}
SYMBOL OTA_diff 576 -640 R0
WINDOW 0 -12 -9 VTop 2
WINDOW 39 -19 62 Top 2
SYMATTR InstName X5
SYMATTR SpiceLine gm = {gm3}
TEXT -1400 -240 Left 2 !.ac dec 1000 {f0/100} {f0*100}
TEXT -568 -232 Left 2 !.param k = 1 Q = sqrt(2)/2 w0 = 1
TEXT -1408 -280 Left 3 ;Configuración de la simulación
TEXT -1400 -168 Left 3 ;Versión normalizada
TEXT -1400 -120 Left 2 !.param f0=w0/2/pi
TEXT -544 -1016 Left 3 ;Bicuad SOS diferencial
TEXT -1400 -72 Left 2 !.param gm1=gm1k*gm gm = 1 gm3=gm gm2=gm
TEXT -1400 8 Left 2 !.param wnorm = 2*pi*1 znorm = 1
TEXT -568 -120 Left 2 !#.param Qz=5 wz=0.1 * w0
TEXT -568 -168 Left 2 ;Full bicuad config
TEXT -568 16 Left 2 ;Low/High pass notch
TEXT -568 64 Left 2 !#.param  wz=.10 * w0
TEXT 280 -272 Left 2 ;Highpass config
TEXT -1392 48 Left 2 ;Allpass config
TEXT 288 -64 Left 2 ;Lowpass config
TEXT 288 -16 Left 2 !.param a = 0 b = 0 vi1=1 vi3=0 vi4=0 gm1k = k
TEXT 280 -168 Left 2 ;Bandpass config
TEXT -568 -272 Left 2 ;SOS parametrization
TEXT 288 32 Left 2 ;Notch config
TEXT 288 -128 Left 2 !#.param a = k/Q**2 b = 0 vi1=0 vi3=1 vi4=0 gm1k = k
TEXT 272 -232 Left 2 !#.param a = k/Q**2 b = k vi1=0 vi3=1 vi4=1 gm1k = k
TEXT 288 72 Left 2 !#.param a = k/Q**2 b = k vi1=1 vi3=1 vi4=1 gm1k = k
TEXT -1392 88 Left 2 !#.param a = 2/Q**2 b = 1 vi1=1 vi3=1 vi4=1 gm1k = k
TEXT -568 104 Left 2 !#.param a = k/Q**2 b = k vi1=1 vi3=1 vi4=1 gm1k = ((wz/w0)**2)*b
TEXT -568 -72 Left 2 !#.param a = (Qz-Q)/Qz/Q**2 b = 1 vi1=1 vi3=1 vi4=1
TEXT -1400 -32 Left 2 !.param c1=gm/w0*Q/znorm/wnorm c2=gm/w0/Q/znorm/wnorm
TEXT -568 -32 Left 2 !#.param gm1k = ((wz/w0)**2)*b
