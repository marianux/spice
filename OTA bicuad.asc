Version 4
SHEET 1 1564 1104
WIRE 240 -192 -592 -192
WIRE 704 -192 304 -192
WIRE 240 -96 -416 -96
WIRE 352 -96 304 -96
WIRE 352 -16 352 -96
WIRE 352 -16 128 -16
WIRE 384 -16 352 -16
WIRE 416 -16 384 -16
WIRE -32 32 -240 32
WIRE 624 32 544 32
WIRE -592 80 -592 -192
WIRE -416 80 -416 -96
WIRE -240 80 -240 32
WIRE 128 80 128 -16
WIRE 128 80 96 80
WIRE 176 80 128 80
WIRE 352 128 352 -16
WIRE 352 128 304 128
WIRE 416 128 352 128
WIRE 624 128 624 32
WIRE 704 128 704 -192
WIRE 704 128 624 128
WIRE 704 144 704 128
WIRE 624 176 624 128
WIRE 624 176 544 176
WIRE 352 192 352 128
FLAG -240 160 0
FLAG -240 32 v1
IOPIN -240 32 In
FLAG 416 224 0
FLAG 544 -64 0
FLAG 704 192 0
FLAG 704 -192 vo
IOPIN 704 -192 Out
FLAG -32 128 0
FLAG 176 176 0
FLAG 352 256 0
FLAG -416 -96 v3
IOPIN -416 -96 In
FLAG -592 -192 v4
IOPIN -592 -192 In
FLAG 384 -16 v2
FLAG -416 160 0
FLAG -592 160 0
SYMBOL voltage -240 64 R0
WINDOW 123 40 55 Left 2
WINDOW 39 0 0 Left 0
WINDOW 0 41 25 Left 2
SYMATTR Value2 AC {vi1}
SYMATTR InstName V1
SYMATTR Value ""
SYMBOL OTA 48 80 R0
WINDOW 39 -19 94 Bottom 2
SYMATTR SpiceLine gm={gm1}
SYMATTR InstName X1
SYMBOL OTA 256 128 R0
WINDOW 39 -19 94 Bottom 2
SYMATTR SpiceLine gm = {gm2}
SYMATTR InstName X2
SYMBOL cap 688 128 R0
WINDOW 0 46 8 Left 2
WINDOW 3 45 43 Left 2
SYMATTR InstName C2
SYMATTR Value {(1-b)*c2}
SYMBOL OTA 496 176 R0
WINDOW 39 -19 94 Bottom 2
SYMATTR SpiceLine gm = {gm3}
SYMATTR InstName X3
SYMBOL OTA 464 -16 M0
WINDOW 39 -19 94 Bottom 2
SYMATTR SpiceLine gm = {gm3}
SYMATTR InstName X4
SYMBOL cap 336 192 R0
WINDOW 0 -43 51 Left 2
WINDOW 3 -99 75 Left 2
SYMATTR InstName C1
SYMATTR Value {(1-a)*c1}
SYMBOL cap 304 -112 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value {a*c1}
SYMBOL cap 304 -208 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 36 31 VTop 2
SYMATTR InstName C4
SYMATTR Value {b*c2}
SYMBOL voltage -416 64 R0
WINDOW 123 40 55 Left 2
WINDOW 39 0 0 Left 0
WINDOW 0 41 25 Left 2
SYMATTR Value2 AC {vi3}
SYMATTR InstName V2
SYMATTR Value ""
SYMBOL voltage -592 64 R0
WINDOW 123 40 55 Left 2
WINDOW 39 0 0 Left 0
WINDOW 0 41 25 Left 2
SYMATTR Value2 AC {vi4}
SYMATTR InstName V3
SYMATTR Value ""
TEXT -176 376 Left 2 !.ac dec 1000 {f0/100} {f0*100}
TEXT -240 704 Left 2 !.param k =1  Q = sqrt(2)/2 w0 = 1
TEXT -184 336 Left 3 ;Configuración de la simulación
TEXT 344 336 Left 3 ;Versión normalizada
TEXT 344 384 Left 2 !.param f0=w0/2/pi
TEXT 176 -296 Left 3 ;Bicuad SOS con OTA
TEXT 344 432 Left 2 !.param gm1=k*gm gm = 1 gm3=gm gm2=gm c1=gm/w0*Q/znorm/wnorm c2=gm/w0/Q/znorm/wnorm
TEXT 352 480 Left 2 !.param wnorm = 2*pi*1 znorm = 1
TEXT 776 696 Left 2 !#.param Qz=5 wz=0.5 * w0
TEXT 776 648 Left 2 ;Full bicuad config
TEXT 776 744 Left 2 !#.param c= k*wz*wz/w0/w0 a = (k+c)/2 b = k * wz / 2 / w0 *(Q/Qz + wz/w0)
TEXT 776 840 Left 2 ;Low/High pass notch
TEXT 776 936 Left 2 !#.param c= k*wz*wz/w0/w0 a = (k+c)/2 b = c/2
TEXT 776 888 Left 2 !#.param  wz=.10 * wnorm
TEXT 264 664 Left 2 ;Highpass config
TEXT 776 1040 Left 2 ;Allpass config
TEXT 776 1080 Left 2 !#.param c= 1 a = 1 b = 0
TEXT 272 872 Left 2 ;Lowpass config
TEXT 272 920 Left 2 !#.param a = 0 b = 0 vi1=1 vi3=0 vi4=0
TEXT 264 768 Left 2 ;Bandpass config
TEXT -248 664 Left 2 ;SOS parametrization
TEXT 272 968 Left 2 ;Notch config
TEXT 272 808 Left 2 !#.param a = k/Q**2 b = 0 vi1=0 vi3=1 vi4=0
TEXT 256 704 Left 2 !#.param a = k/Q**2 b = k vi1=0 vi3=1 vi4=1
TEXT 272 1008 Left 2 !.param a = k/Q**2 b = k vi1=0 vi3=1 vi4=1
